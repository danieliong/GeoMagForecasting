schema: '2.0'
stages:
  concat_configs:
    cmd: python src/concat_configs.py
    deps:
    - path: configs/
      md5: 35d92231c5b301613a1de1850409edd4.dir
      size: 10990
      nfiles: 17
    - path: src/concat_configs.py
      md5: 252811f01efc4172e625aae91d815eca
      size: 498
    outs:
    - path: params/compute_lagged_features.yaml
      md5: bdf968f2a53d08e4d2471b3b03999ca3
      size: 4423
    - path: params/process_data.yaml
      md5: 5bb99000894fbe8b0ef9e09e7cb19f1f
      size: 4185
    - path: params/train.yaml
      md5: 8fda9fca62e889fee6aaba4a1b33667d
      size: 3992
  process_data:
    cmd: python src/process_data.py
    deps:
    - path: data/omni_2010-2019.csv.gz
      md5: 0cfa33ca53d7178113b5bed3b45b579e
      size: 286647580
    - path: data/stormtimes.csv
      md5: 91ee8bd4dd541ad6311da2eb23078e75
      size: 8941
    - path: data/symh.csv
      md5: ce57cb429e285eb69b806e1a2c7c8e5c
      size: 132525924
    params:
      params/process_data.yaml:
        end: '2019-12-31'
        features:
          name: omni
          load:
            path: data/omni_2010-2019.csv.gz
            time_col: times
            features:
            - b
            - bx
            - by
            - bz
            - vx_gse
            - vy_gse
            - vz_gse
            - density
            - temperature
            - pressure
            - e
            - beta
            - alfven_mach
            - mach
            - x_gse
            - y_gse
            - z_gse
          pipeline:
            interpolate:
              method: linear
              axis: 0
              limit_direction: both
              limit: 15
            resample:
              freq: T
              func: mean
            scaler:
              scaler:
              kwargs:
            func:
              func:
              inverse_func:
              kwargs:
            filter:
              type: limited_change
              density_col: density
              temp_col: temperature
              limited_change:
                factor: 1.3
                change_down: 30
                change_ups:
                - 50
                - 10
            propagate:
            delete_cols:
            - x_gse
            - y_gse
            - z_gse
        seed: 8686
        split:
          method: storms
          test_size: 5
          storm_times: data/stormtimes.csv
          test_storms:
          threshold: -100
          threshold_less_than: true
        start: '2010-01-01'
        target:
          name: symh
          load:
            path: data/symh.csv
          pipeline:
            interpolate: false
            resample:
              freq: 5T
              func: mean
            scaler:
              scaler:
              kwargs:
            func:
              func:
              inverse_func:
              kwargs:
    outs:
    - path: outputs/processed_data/features_pipeline.pkl
      md5: 3dd885f1515ca399c656ae12fba37802
      size: 8244
    - path: outputs/processed_data/target_pipeline.pkl
      md5: 2a6959010460062f9f9c99be1915222a
      size: 7880
    - path: outputs/processed_data/test_features.pkl
      md5: 2d4d4f0fcb896005c2d637de4f8b8bc8
      size: 2773985
    - path: outputs/processed_data/test_target.pkl
      md5: b690c26b560dee5ef342b468a1a5ee79
      size: 109500
    - path: outputs/processed_data/train_features.pkl
      md5: 7cf58f478edc96468142b6c449837c5a
      size: 76132953
    - path: outputs/processed_data/train_target.pkl
      md5: c61c5bed6364c45c684ffb548339096f
      size: 3478396
